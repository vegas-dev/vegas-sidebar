var vg;(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(...e){const t=e=>e&&"object"==typeof e;return e.reduce(((e,n)=>(Object.keys(n).forEach((o=>{const s=e[o],i=n[o];Array.isArray(s)&&Array.isArray(i)?e[o]=s.concat(...i):t(s)&&t(i)?e[o]=r(s,i):e[o]=i})),e)),{})}function n(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function o(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}e.r(t),e.d(t,{VGSidebar:()=>c});const s={getDataAttributes(e,t=!0,r=!0){if(!e)return{};const n={},s=[].filter.call(e.attributes,(function(e){return/^data-/.test(e.name)}));return s.length&&s.forEach((function(e){let s=e.name;t&&(s=s.slice(5)),r&&-1!==s.indexOf("vg-")&&(s=s.slice(3)),n[s]=o(e.value)})),n},getAttribute:function(e,t){return e?e.getAttribute(t):""},find:function(e){if(e){if("string"==typeof e){let t=document.querySelector(e);if(t)return t;throw new Error("Ахпер! Не удалось найти элемент")}if("object"==typeof e)return e;throw new Error("КЭП! Какая-то дичь к нам залетела")}throw new Error("Товарищ! Первый параметр не должен быть пустым!")}},i=function(e,t,r={}){const n=new CustomEvent(t,{bubbles:!0,detail:r});e.dispatchEvent(n)},a=class{constructor(){this._element=null,this._params={}}get element(){return this._element}set element(e){this._element=s.find(e)}get params(){return this._params}set params(e){if(!n(e)){let t=s.getDataAttributes(this.element);this._params=r(e,t)}}};class l extends a{constructor(e,t={}){super(),this._isShown=!1,this.paramsDefault={backdrop:!0,overflow:!0,keyboard:!0,ajax:{route:"",target:""}},this.element=e;let s=r(t,this.paramsDefault);if((i=s)&&"object"==typeof i&&!n(s))for(const e in s){let t=o(s[e]);if("params"!==e)if(e in this.paramsDefault)s[e]=t;else{let r=e.split("-");r[1]in this.paramsDefault[r[0]]&&(this.paramsDefault[r[0]][r[1]]=t),delete s[e]}else s=r(s,t),delete s[e]}var i;this.params=s,this.init()}init(){let e=this.element.querySelector(".vg-sidebar-close");e&&(e.querySelector("svg")||e.insertAdjacentHTML("beforeend",'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve"><path d="M89.7,10.3L89.7,10.3c-1-1-2.6-1-3.5,0L50,46.5L13.9,10.3c-1-1-2.6-1-3.5,0l0,0c-1,1-1,2.6,0,3.5L46.5,50L10.3,86.1\tc-1,1-1,2.6,0,3.5h0c1,1,2.6,1,3.5,0L50,53.5l36.1,36.1c1,1,2.6,1,3.5,0l0,0c1-1,1-2.6,0-3.5L53.5,50l36.1-36.1\tC90.6,12.9,90.6,11.3,89.7,10.3z"/></svg>')),this.element.vgSidebar=this}toggle(){return this._isShown?this.hide():this.show()}show(){const e=this;this._isShown||(this._isShown=!0,i(e.element,"vg.sidebar.show"),e._backdrop(),e._overflow(),e.element.classList.add("show"),setTimeout((()=>{e.params.ajax.route&&e.params.ajax.target&&e._route(),i(e.element,"vg.sidebar.shown")}),50),e._addEventListener())}hide(){const e=this;this._isShown&&(this._isShown=!1,i(e.element,"vg.sidebar.hide"),e._backdrop(),e._overflow(),e.element.classList.remove("show"),setTimeout((()=>{i(e.element,"vg.sidebar.hidden")}),50))}static getInstance(e){return"string"==typeof e&&(e=document.querySelector(e)),e?.vgSidebar}static makeInit(e){e.addEventListener("click",(()=>{let t=s.getDataAttributes(e),r=t.target||e.getAttribute("href")||null;return r&&"string"==typeof r&&(delete t.target,delete t.toggle,new l(r,t).toggle()),!1}))}_backdrop(){let e=document.querySelector(".vg-sidebar-backdrop");this.params.backdrop&&(e?e.remove():(e=document.createElement("div"),e.classList.add("vg-sidebar-backdrop"),document.body.append(e),setTimeout((()=>{e.classList.add("fade")}),50)))}_overflow(){this.params.overflow&&(this._isShown?(document.body.style.paddingRight=function(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}()+"px",document.body.style.overflow="hidden"):(document.body.style.overflow="",document.body.style.paddingRight=""))}_addEventListener(){const e=this;let t=document.querySelector(".vg-sidebar-backdrop");t&&(t.onclick=function(){return e.hide(),!1}),[...document.querySelectorAll('[data-vg-dismiss="sidebar"]')].forEach((function(e){e.onclick=function(){let t=e.dataset.vgTarget||e.closest(".vg-sidebar")||null;return t&&l.getInstance(t).hide(),!1}})),e.params.keyboard&&(document.onkeyup=function(t){return"Escape"===t.key&&e.hide(),!1})}_route(){const e=this;let t=document.querySelector(e.params.ajax.target);if(t){let t=new XMLHttpRequest;t.open("get",e.params.ajax.route,!0),t.onload=function(){r(t.responseText),i(e.element,"vg.sidebar.loaded")},t.send()}const r=e=>{t.innerHTML=e}}}const c=l;[...document.querySelectorAll('[data-vg-toggle="sidebar"]')].forEach((function(e){c.makeInit(e)})),vg=t})();
//# sourceMappingURL=vgsidebar.js.map