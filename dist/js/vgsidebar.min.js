"use strict";class VGSidebar{constructor(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.sidebar=null,this.button=null,this.target=null,this.settings={content_over:!0,hash:!1,ajax:{target:"",route:""}},this.init(a,b)}init(a,b,c){if(this.target="string"==typeof a?a:a.dataset.target||a.href,-1!==this.target.indexOf("#")&&(this.target=this.target.split("#")[1]),this.target){var d=this;this.sidebar=document.getElementById(this.target),this.button=a,this.settings=Object.assign(this.settings,b),document.body.classList.contains("sidebar-open")&&!this.sidebar.classList.contains("open")&&this.close(c,!0),c&&"function"==typeof c&&c(d)}}open(a){if(!this.sidebar)return!1;var b=this;if(a&&"beforeOpen"in a&&"function"==typeof a.beforeOpen&&a.beforeOpen(b),b.sidebar.classList.add("open"),b.button&&"string"!=typeof b.button&&b.button.classList.add("active"),document.body.classList.add("sidebar-open"),b.settings.hash){var d=b.sidebar.id;d&&window.history.pushState(null,"sidebar open","#sidebar-open-"+d),window.addEventListener("popstate",function(){b.close()},!1)}if(b.settings.content_over&&(document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth,document.body.style.overflow="hidden"),b.settings.ajax.route&&b.settings.ajax.target){var e=document.getElementById(b.settings.ajax.target);if(e){var f=new XMLHttpRequest;f.open("get",b.settings.ajax.route,!0),f.onload=function(){var a=JSON.parse(f.responseText);g(a)},f.send()}var g=a=>{e.innerHTML=a}}document.onclick=function(a){if(a.target===b.sidebar)return b.close(),!1},document.onkeyup=function(a){return"Escape"===a.key&&b.close(),!1};var c=b.sidebar.querySelectorAll("[data-dismiss=\"vg-sidebar\"]");for(var h of c)h.onclick=function(){return b.close(),!1};a&&"afterOpen"in a&&"function"==typeof a.afterOpen&&a.afterOpen(b)}close(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.sidebar)return!1;var c=this;if(a&&"beforeClose"in a&&"function"==typeof a.beforeClose&&a.beforeClose(c),b){var d=document.querySelectorAll(".vg-sidebar.open");if(d&&d.length)for(var e of d)e.classList.remove("open"),document.body.classList.remove("sidebar-open"),location.hash&&history.pushState("",document.title,window.location.pathname+window.location.search)}else c.sidebar.classList.remove("open"),c.button&&"string"!=typeof c.button&&c.button.classList.remove("active"),document.body.classList.remove("sidebar-open"),location.hash&&history.pushState("",document.title,window.location.pathname+window.location.search),c.settings.content_over&&(document.body.style.paddingRight="",document.body.style.overflow="");a&&"afterClose"in a&&"function"==typeof a.afterClose&&a.afterClose(c)}}if(window.location.hash){var target=window.location.hash.replace("#sidebar-open-","");if(document.getElementById(target)){var sidebar=new VGSidebar(target);sidebar.open()}}var $vg_sidebar_toggle=document.querySelectorAll("[data-toggle=\"vg-sidebar\"]");for(var $btn of $vg_sidebar_toggle)$btn.onclick=function(){var a=this,b={content_over:a.dataset.over||!0,hash:a.dataset.hash||!1,ajax:{target:a.dataset.ajaxTarget||"",route:a.dataset.ajaxRoute||""}},c=new VGSidebar(a,b);return document.body.classList.contains("sidebar-open")?c.close():c.open(),!1};
